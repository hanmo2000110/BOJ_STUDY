def check(x, y):
    result = 0
    for condition in tetris:
        flag = True
        for a, b in condition:
            if a+x >= m or a+x < 0 or b+y >= n or b+y < 0:
                flag = False
                break
        if flag == False:
            continue
        s = 0
        for a, b in condition:
            s += l[y+b][x+a]
        result = max(result, s)
    return result


n, m = map(int, input().split())
l = [list(map(int, input().split())) for i in range(n)]
# 테트로미노의 모든 경우의 수를 0,0 기준의 좌표값을 저장해둔다.
tetris = [[(0, 0), (0, 1), (0, 2), (0, 3)],
          [(0, 0), (1, 0), (2, 0), (3, 0)],
          [(0, 0), (1, 0), (0, 1), (1, 1)],
          [(0, 0), (1, 0), (2, 0), (2, 1)],
          [(0, 1), (1, 1), (2, 1), (2, 0)],
          [(0, 0), (0, 1), (1, 1), (2, 1)],
          [(0, 0), (0, 1), (1, 0), (2, 0)],
          [(0, 0), (1, 0), (1, 1), (1, 2)],
          [(0, 2), (1, 1), (1, 2), (1, 0)],
          [(0, 0), (0, 1), (0, 2), (1, 2)],
          [(0, 0), (1, 0), (0, 1), (0, 2)],
          [(0, 0), (1, 0), (1, 1), (2, 1)],
          [(0, 1), (1, 1), (1, 0), (2, 0)],
          [(1, 0), (1, 1), (0, 1), (0, 2)],
          [(0, 0), (0, 1), (1, 1), (1, 2)],
          [(0, 1), (1, 0), (1, 1), (1, 2)],
          [(0, 0), (0, 1), (0, 2), (1, 1)],
          [(0, 0), (1, 0), (1, 1), (2, 0)],
          [(0, 1), (1, 1), (1, 0), (2, 1)]]
# conditions = [[(0, 0), (0, 1), (1, 0), (1, 1)],
#               [(0, 0), (1, 0), (2, 0), (3, 0)],
#               [(0, 0), (0, 1), (0, 2), (0, 3)],
#               [(0, 0), (1, 0), (2, 0), (1, 1)],
#               [(0, 0), (0, 1), (0, 2), (-1, 1)],
#               [(0, 0), (0, 1), (0, 2), (1, 1)],
#               [(0, 0), (1, 0), (2, 0), (1, -1)],
#               [(0, 0), (0, 1), (0, 2), (1, 2)],
#               [(0, 0), (1, 0), (2, 0), (0, -1)],
#             #   [(0, 0), (1, 0), (1, 1), (1, 2)],
#               [(0, 0), (1, 0), (2, 0), (0, 1)],
#               [(0, 0), (0, 1), (0, 2), (-1, 2)],
#               [(0, 0), (1, 0), (2, 0), (0, -1)],
#               [(0, 0), (0, 1), (0, 2), (1, 0)],
#               [(0, 0), (1, 0), (2, 0), (2, 1)],
#               [(0, 0), (0, 1), (1, 1), (1, 2)],
#               [(0, 0), (1, 0), (1, -1), (2, -1)],
#               [(0, 0), (1, 0), (1, 1), (3, 1)],
#               [(0, 0), (0, 1), (-1, 1), (-1, 2)]
#               ]
result = 0
for i in range(m):
    for j in range(n):
        result = max(result, check(i, j))
print(result)